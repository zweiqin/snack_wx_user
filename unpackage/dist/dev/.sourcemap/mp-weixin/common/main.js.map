{"version":3,"sources":["uni-app:///main.js","webpack:///D:/zwq/company-project/零食小程序/uni-app/App.vue?12b6","webpack:///D:/zwq/company-project/零食小程序/uni-app/App.vue?d5f6",null,"webpack:///D:/zwq/company-project/零食小程序/uni-app/App.vue?c227","uni-app:///App.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","Vue","prototype","$util","util","$config","configs","$Cache","Cache","$eventHub","$socket","socket","config","productionTip","component","skeleton","pageLoading","App","mpType","app","store","$mount"],"mappings":";;;;;;;;;;iDAAA;;;;;;;;;;;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA,0F,ynCAjBA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,C,CAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AASAC,aAAIC,SAAJ,CAAcC,KAAd,GAAsBC,aAAtB,CACAH,aAAIC,SAAJ,CAAcG,OAAd,GAAwBC,YAAxB,CACAL,aAAIC,SAAJ,CAAcK,MAAd,GAAuBC,cAAvB,CACAP,aAAIC,SAAJ,CAAcO,SAAd,GAA0B,IAAIR,YAAJ,EAA1B,CACAA,aAAIC,SAAJ,CAAcQ,OAAd,GAAwB,IAAIC,iBAAJ,EAAxB,CACAV,aAAIW,MAAJ,CAAWC,aAAX,GAA2B,KAA3B,C,6lBAIAZ,aAAIa,SAAJ,CAAc,UAAd,EAA0BC,QAA1B;AACAd,aAAIa,SAAJ,CAAc,aAAd,EAA4BE,WAA5B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CAC,aAAIC,MAAJ,GAAa,KAAb;;;AAGA,IAAMC,GAAG,GAAG,IAAIlB,YAAJ;AACLgB,YADK;AAEXG,OAAK,EAALA,cAFW;AAGXZ,OAAK,EAALA,cAHW,IAAZ;;AAKA,UAAAW,GAAG,EAACE,MAAJ,G;;;;;;;;;;;;;ACpFA;AAAA;AAAA;AAAA;AAAs5B,CAAgB,k2BAAG,EAAC,C;;;;;;;;;;;ACA16B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACuD;AACL;AACa;;;AAG/D;AACwK;AACxK,gBAAgB,6KAAU;AAC1B,EAAE,yEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAynB,CAAgB,6mBAAG,EAAC,C;;;;;;;;;;;;;ACC7oB;;;AAGA;;;AAGA;;;;AAIA;AACA;AACA;;;AAGA;;;AAGA;;;AAGA,sF;AACA;AACA,qUADA;AAEA;AACA,oUADA;AAEA;AACA,uUADA;AAEA;AACA,wUADA;AAEA;AACA,oUADA,C;;AAGA;AACA;AACA,WADA;AAEA,WAFA;AAGA,kBAHA;AAIA,gBAJA;AAKA,eALA;AAMA,qBANA;AAOA,mBAPA;AAQA,oBARA;AASA,mBATA,EADA;;AAYA,0BAZA;AAaA,yDAbA;AAcA;AACA;AACA,gBADA,EACA;AACA,aAFA,mBAEA,IAFA,EAEA,IAFA,EAEA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OARA,EADA;;AAWA,WAXA,mBAWA,OAXA,EAWA,CAXA,EAWA;AACA;AACA;AACA;AACA,kEADA;AAEA,4BAFA;;AAIA,OALA,MAKA;AACA;AACA,kEADA;;AAGA;AACA,KAvBA,EAdA;;AAuCA,UAvCA,oBAuCA,MAvCA,EAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAxBA;;AA0BA,KA3BA;AA4BA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAjBA;;AAmBA;AACA;;AAEA;AACA;AACA,KAFA;;AAIA;AACA;AACA,qBADA;AAEA,mCAFA;AAGA,eAHA,mBAGA,GAHA,EAGA;AACA;AACA;AACA;AACA;AACA,SARA;;AAUA,KAXA;;AAaA;AACA;AACA,wBADA;;AAGA,KAJA;;AAMA;AACA;AACA;AACA;AACA;AACA,aADA,mBACA,GADA,EACA;AACA;AACA,OAHA;;;AAMA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA,UADA,CACA;AACA;AACA,OAHA;AAIA,WAJA,CAIA;AACA;AACA,OANA;AAOA;;;;;;;;AAQA,GAjQA;AAkQA,SAlQA,qBAkQA,EAlQA;AAmQA;AACA;AACA,eAFA,uBAEA,IAFA,EAEA;AACA;AACA;AACA;AACA,kBADA;AAEA,2BAFA;AAGA,yCAHA;;AAKA,UALA,CAKA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA,OAhBA;AAiBA,WAjBA,CAiBA,iBAjBA;AAkBA,KAvBA,EAnQA;;AA4RA,QA5RA,oBA4RA;;AAEA,GA9RA,E","file":"common/main.js","sourcesContent":["import 'uni-pages';\r\n// @ts-ignore\r\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;// +----------------------------------------------------------------------\r\n// | CRMEB [ CRMEB赋能开发者，助力企业发展 ]\r\n// +----------------------------------------------------------------------\r\n// | Copyright (c) 2016~2021 https://www.crmeb.com All rights reserved.\r\n// +----------------------------------------------------------------------\r\n// | Licensed CRMEB并不是自由软件，未经许可不能去掉CRMEB相关版权\r\n// +----------------------------------------------------------------------\r\n// | Author: CRMEB Team <admin@crmeb.com>\r\n// +----------------------------------------------------------------------\r\n\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport store from './store'\r\nimport Cache from './utils/cache'\r\nimport util from 'utils/util'\r\nimport configs from './config/app.js'\r\nimport socket from './libs/new_chat.js'\r\nVue.prototype.$util = util;\r\nVue.prototype.$config = configs;\r\nVue.prototype.$Cache = Cache;\r\nVue.prototype.$eventHub = new Vue();\r\nVue.prototype.$socket = new socket();\r\nVue.config.productionTip = false\r\nimport pageLoading from './components/pageLoading.vue'\r\nimport skeleton from './components/skeleton/index.vue'\r\n\r\nVue.component('skeleton', skeleton)\r\nVue.component('pageLoading',pageLoading)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nApp.mpType = 'app'\r\n\r\n\r\nconst app = new Vue({\r\n    ...App,\r\n\tstore,\r\n\tCache,\r\n})\r\napp.$mount();","import mod from \"-!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1666835715637\n      var cssReload = require(\"D:/工具软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../工具软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"","<script>\r\nimport {\r\n\tcheckLogin\r\n} from './libs/login'\r\nimport {\r\n\tHTTP_REQUEST_URL\r\n} from './config/app'\r\nimport {\r\n\tgetShopConfig,\r\n\tsilenceAuth\r\n} from '@/api/public'\r\nimport Auth from '@/libs/wechat.js'\r\nimport Routine from './libs/routine.js'\r\nimport {\r\n\tgetCartCounts\r\n} from '@/api/order.js'\r\nimport {\r\n\tcolorChange\r\n} from '@/api/api.js'\r\nimport {\r\n\tmapGetters\r\n} from 'vuex'\r\nimport colors from '@/mixins/color.js'\r\nconst green =\r\n\t\t'--view-theme: rgba(66,202,77,1);--view-theme-16: #42CA4D;--view-priceColor:#FF7600;--view-minorColor:rgba(108, 198, 94, 0.5);--view-minorColorT:rgba(66, 202, 77, 0.1);--view-bntColor:#FE960F;--view-op-ten: rgba(66,202,77, 0.1);--view-main-start:#70E038; --view-main-over:#42CA4D;--view-op-point-four: rgba(66,202,77, 0.04);'\r\nconst red =\r\n\t\t'--view-theme: rgba(233,51,35,1);--view-theme-16: #e93323;--view-priceColor:#e93323;--view-minorColor:rgba(233, 51, 35, 0.5);--view-minorColorT:rgba(233, 51, 35, 0.1);--view-bntColor:#FE960F;--view-op-ten: rgba(233,51,35, 0.1);--view-main-start:#FF6151; --view-main-over:#e93323;--view-op-point-four: rgba(233,51,35, 0.04);'\r\nconst blue =\r\n\t\t'--view-theme: rgba(29,176,252,1);--view-theme-16:#1db0fc;--view-priceColor:#FD502F;--view-minorColor:rgba(58, 139, 236, 0.5);--view-minorColorT:rgba(9, 139, 243, 0.1);--view-bntColor:#22CAFD;--view-op-ten: rgba(29,176,252, 0.1);--view-main-start:#40D1F4; --view-main-over:#1DB0FC;--view-op-point-four: rgba(29,176,252, 0.04);'\r\nconst pink =\r\n\t\t'--view-theme: rgba(255,68,143,1);--view-theme-16:#ff448f;--view-priceColor:#FF448F;--view-minorColor:rgba(255, 68, 143, 0.5);--view-minorColorT:rgba(255, 68, 143, 0.1);--view-bntColor:#282828;--view-op-ten: rgba(255,68,143, 0.1);--view-main-start:#FF67AD; --view-main-over:#FF448F;--view-op-point-four: rgba(255,68,143, 0.04);'\r\nconst orange =\r\n\t\t'--view-theme: rgba(254,92,45,1); --view-theme-16:#FE5C2D;--view-priceColor:#FE5C2D;--view-minorColor:rgba(254, 92, 45, 0.5);--view-minorColorT:rgba(254, 92, 45, 0.1);--view-bntColor:#FDB000;--view-op-ten: rgba(254,92,45, 0.1);--view-main-start:#FF9445; --view-main-over:#FE5C2D;--view-op-point-four: rgba(254,92,45, 0.04);'\r\n\r\nexport default {\r\n\tglobalData: {\r\n\t\tspid: 0,\r\n\t\tcode: 0,\r\n\t\tisLogin: false,\r\n\t\tuserInfo: {},\r\n\t\tMyMenus: [],\r\n\t\tglobalData: false,\r\n\t\tisIframe: false,\r\n\t\ttabbarShow: true,\r\n\t\twindowHeight: 0\r\n\t},\r\n\tmixins: [ colors ],\r\n\tcomputed: mapGetters(['isLogin', 'cartNum']),\r\n\twatch: {\r\n\t\tisLogin: {\r\n\t\t\tdeep: true, // 深度监听设置为 true\r\n\t\t\thandler(newV, oldV) {\r\n\t\t\t\tif (newV) {\r\n\t\t\t\t\t// this.getCartNum()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$store.commit('indexData/setCartNum', '')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcartNum(newCart, b) {\r\n\t\t\tthis.$store.commit('indexData/setCartNum', newCart + '')\r\n\t\t\tif (newCart > 0) {\r\n\t\t\t\tuni.setTabBarBadge({\r\n\t\t\t\t\tindex: Number(uni.getStorageSync('FOOTER_ADDCART')) || 2,\r\n\t\t\t\t\ttext: newCart + ''\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tuni.hideTabBarRedDot({\r\n\t\t\t\t\tindex: Number(uni.getStorageSync('FOOTER_ADDCART')) || 2\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonLaunch(option) {\r\n\t\tconst that = this\r\n\t\tcolorChange('color_change').then((res) => {\r\n\t\t\tswitch (res.data.status) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tuni.setStorageSync('viewColor', blue)\r\n\t\t\t\t\tuni.$emit('ok', blue)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tuni.setStorageSync('viewColor', green)\r\n\t\t\t\t\tuni.$emit('ok', green)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tuni.setStorageSync('viewColor', red)\r\n\t\t\t\t\tuni.$emit('ok', red)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tuni.setStorageSync('viewColor', pink)\r\n\t\t\t\t\tuni.$emit('ok', pink)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\tuni.setStorageSync('viewColor', orange)\r\n\t\t\t\t\tuni.$emit('ok', orange)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tuni.setStorageSync('viewColor', red)\r\n\t\t\t\t\tuni.$emit('ok', red)\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (option.query.spread) {\r\n\t\t\tthat.$Cache.set('spread', option.query.spread)\r\n\t\t\tthat.globalData.spid = option.query.spread\r\n\t\t\tthat.globalData.pid = option.query.spread\r\n\t\t}\r\n\t\t// #ifdef APP-PLUS || H5\r\n\t\tuni.getSystemInfo({\r\n\t\t\tsuccess(res) {\r\n\t\t\t\t// 首页没有title获取的整个页面的高度，里面的页面有原生标题要减掉就是视口的高度\r\n\t\t\t\t// 状态栏是动态的可以拿到 标题栏是固定写死的是44px\r\n\t\t\t\tconst height = res.windowHeight - res.statusBarHeight - 44\r\n\t\t\t\t// #ifdef H5 || APP-PLUS\r\n\t\t\t\tthat.globalData.windowHeight = res.windowHeight + 'px'\r\n\t\t\t\t// #endif\r\n\t\t\t\t// // #ifdef APP-PLUS\r\n\t\t\t\t// that.globalData.windowHeight = height + 'px'\r\n\t\t\t\t// // #endif\r\n\t\t\t}\r\n\t\t})\r\n\t\t// #endif\r\n\t\t// #ifdef MP\r\n\t\tif (HTTP_REQUEST_URL == '') {\r\n\t\t\tconsole.error(\"请配置根目录下的config.js文件中的 'HTTP_REQUEST_URL'\\n\\n请修改开发者工具中【详情】->【AppID】改为自己的Appid\\n\\n请前往后台【小程序】->【小程序配置】填写自己的 appId and AppSecret\")\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tif (option.query.hasOwnProperty('scene')) {\r\n\t\t\tswitch (option.scene) {\r\n\t\t\t\t// 扫描小程序码\r\n\t\t\t\tcase 1047:\r\n\t\t\t\t\tconst val = that.$util.getUrlParams(decodeURIComponent(option.query.scene))\r\n\t\t\t\t\tthat.globalData.code = val.pid === undefined ? val : val.pid\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\t// 长按图片识别小程序码\r\n\t\t\t\tcase 1048:\r\n\t\t\t\t\tthat.globalData.code = option.query.scene\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\t// 手机相册选取小程序码\r\n\t\t\t\tcase 1049:\r\n\t\t\t\t\tthat.globalData.code = option.query.scene\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\t// 直接进入小程序\r\n\t\t\t\tcase 1001:\r\n\t\t\t\t\tthat.globalData.spid = option.query.scene\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst updateManager = wx.getUpdateManager()\r\n\r\n\t\tupdateManager.onCheckForUpdate(function (res) {\r\n\t\t\t// 请求完新版本信息的回调\r\n\t\t})\r\n\r\n\t\tupdateManager.onUpdateReady(function () {\r\n\t\t\twx.showModal({\r\n\t\t\t\ttitle: '更新提示',\r\n\t\t\t\tcontent: '新版本已经准备好，是否重启应用？',\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t// 新的版本已经下载好，调用 applyUpdate 应用新版本并重启\r\n\t\t\t\t\t\tupdateManager.applyUpdate()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tupdateManager.onUpdateFailed(function () {\r\n\t\t\treturn that.Tips({\r\n\t\t\t\ttitle: '新版本下载失败'\r\n\t\t\t})\r\n\t\t})\r\n\t\t// #endif\r\n\t\t// getShopConfig().then(res => {\r\n\t\t// \tthis.$store.commit('SETPHONESTATUS', res.data.status);\r\n\t\t// });\r\n\t\t// 获取导航高度；\r\n\t\tuni.getSystemInfo({\r\n\t\t\tsuccess(res) {\r\n\t\t\t\tthat.globalData.navHeight = res.statusBarHeight * (750 / res.windowWidth) + 91\r\n\t\t\t}\r\n\t\t})\r\n\t\t// #ifdef MP\r\n\t\tconst menuButtonInfo = uni.getMenuButtonBoundingClientRect()\r\n\t\tthat.globalData.navH = menuButtonInfo.top * 2 + menuButtonInfo.height / 2\r\n\t\t// #endif\r\n\r\n\t\t// #ifdef H5\r\n\t\tuni.getSystemInfo({\r\n\t\t\tsuccess(e) {\r\n\t\t\t\t/* 窗口宽度大于420px且不在PC页面且不在移动设备时跳转至 PC.html 页面 */\r\n\n\t\t\t\tif (e.windowWidth > 420 && !window.top.isPC && !/iOS|Android/i.test(e.system)) {\r\n\t\t\t\t\twindow.location.pathname = '/static/html/pc.html'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (option.query.hasOwnProperty('type') && option.query.type == 'iframeWindow') {\r\n\t\t\tthis.globalData.isIframe = true\r\n\t\t} else {\r\n\t\t\tthis.globalData.isIframe = false\r\n\t\t}\r\n\r\n\t\tif (window.location.pathname !== '/') {\r\n\t\t\tconst snsapiBase = 'snsapi_base'\r\n\t\t\tconst urlData = location.pathname + location.search\r\n\t\t\tif (!that.$store.getters.isLogin && uni.getStorageSync('authIng')) {\r\n\t\t\t\tuni.setStorageSync('authIng', false)\r\n\t\t\t}\r\n\t\t\tif (!that.$store.getters.isLogin && Auth.isWeixin()) {\r\n\t\t\t\tlet code\r\n\t\t\t\tlet state\r\n\t\t\t\tconst scope = ''\r\n\r\n\t\t\t\tif (option.query.code instanceof Array) {\r\n\t\t\t\t\tcode = option.query.code[option.query.code.length - 1]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcode = option.query.code\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code && code != uni.getStorageSync('snsapiCode') && location.pathname.indexOf('/pages/users/wechat_login/index') === -1) {\r\n\t\t\t\t\t// 存储静默授权code\r\n\t\t\t\t\tuni.setStorageSync('snsapiCode', code)\r\n\t\t\t\t\tconst spread = that.globalData.spid ? that.globalData.spid : ''\r\n\t\t\t\t\tsilenceAuth({\r\n\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\tspread: that.$Cache.get('spread'),\r\n\t\t\t\t\t\tspid: that.globalData.code\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\tuni.setStorageSync('snRouter', decodeURIComponent(decodeURIComponent(option.query\r\n\t\t\t\t\t\t\t\t.back_url)))\r\n\t\t\t\t\t\t\tif (res.data.key !== undefined && res.data.key) {\r\n\t\t\t\t\t\t\t\tthis.$Cache.set('snsapiKey', res.data.key)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconst time = res.data.expires_time - this.$Cache.time()\r\n\t\t\t\t\t\t\t\tthis.$store.commit('LOGIN', {\r\n\t\t\t\t\t\t\t\t\ttoken: res.data.token,\r\n\t\t\t\t\t\t\t\t\ttime\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\tthis.$store.commit('SETUID', res.data.userInfo.uid)\r\n\t\t\t\t\t\t\t\tthis.$store.commit('UPDATE_USERINFO', res.data.userInfo)\r\n\t\t\t\t\t\t\t\tif (option.query.back_url) {\r\n\t\t\t\t\t\t\t\t\tlocation.replace(decodeURIComponent(decodeURIComponent(option.query\r\n\t\t\t\t\t\t\t\t\t\t.back_url)))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\t\tlet url = ''\r\n\t\t\t\t\t\t\tif (option.query.back_url instanceof Array) {\r\n\t\t\t\t\t\t\t\turl = option.query.back_url[option.query.back_url.length - 1]\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\turl = option.query.back_url\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!that.$Cache.has('snsapiKey')) {\r\n\t\t\t\t\t\t\t\tif (location.pathname.indexOf('/pages/users/wechat_login/index') === -1) {\r\n\t\t\t\t\t\t\t\t\tAuth.oAuth(snsapiBase, url)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t} else if (!this.$Cache.has('snsapiKey')) {\r\n\t\t\t\t\tif (location.pathname.indexOf('/pages/users/wechat_login/index') === -1) {\r\n\t\t\t\t\t\tAuth.oAuth(snsapiBase, urlData)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (option.query.back_url) {\r\n\t\t\t\tlocation.replace(uni.getStorageSync('snRouter'))\r\n\t\t\t}\r\n\t\t}\r\n\t\t// #endif\r\n\t\t// #ifdef MP\r\n\t\t// 小程序静默授权\r\n\t\tif (!this.$store.getters.isLogin) {\r\n\t\t\tRoutine.getCode()\r\n\t\t\t\t.then((code) => {\r\n\t\t\t\t\tthis.silenceAuth(code)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((res) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t})\r\n\t\t}\r\n\t\t// #endif\r\n\t\t// #ifdef H5\r\n\t\t// 添加crmeb chat 统计\r\n\t\tvar __s = document.createElement('script')\r\n\t\t__s.src = `${HTTP_REQUEST_URL}/api/get_script`\r\n\t\tdocument.head.appendChild(__s)\r\n\t\t// #endif\r\n\t},\r\n\tmounted() {},\r\n\tmethods: {\r\n\t\t// 小程序静默授权\r\n\t\tsilenceAuth(code) {\r\n\t\t\tconst that = this\r\n\t\t\tconst spread = that.globalData.spid ? that.globalData.spid : ''\r\n\t\t\tsilenceAuth({\r\n\t\t\t\tcode,\r\n\t\t\t\tspread_spid: spread,\r\n\t\t\t\tspread_code: that.globalData.code\r\n\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res.data.token !== undefined && res.data.token) {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tconst time = res.data.expires_time - this.$Cache.time()\r\n\t\t\t\t\t\tthat.$store.commit('LOGIN', {\r\n\t\t\t\t\t\t\ttoken: res.data.token,\r\n\t\t\t\t\t\t\ttime\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthat.$store.commit('SETUID', res.data.userInfo.uid)\r\n\t\t\t\t\t\tthat.$store.commit('UPDATE_USERINFO', res.data.userInfo)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((res) => {})\r\n\t\t}\r\n\t},\r\n\tonHide() {\r\n\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n\t@import url('@/plugin/emoji-awesome/css/google.min.css');\r\n\t@import url('@/plugin/animate/animate.min.css');\r\n\t@import 'static/css/base.css';\r\n\t@import 'static/iconfont/iconfont.css';\r\n\t@import 'static/css/guildford.css';\r\n\t@import 'static/css/style.scss';\n\n\thtml,body {\n\t\theight: 100%;\n\t}\n\r\n\tview {\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\tpage {\r\n\t\tfont-family: PingFang SC;\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.bg-color-red {\r\n\t\tbackground-color: var(--view-theme) !important;\r\n\t}\r\n\r\n\t.syspadding {\r\n\t\tpadding-top: var(--status-bar-height);\r\n\t}\r\n\r\n\t.flex {\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.uni-scroll-view::-webkit-scrollbar {\r\n\t\t/* 隐藏滚动条，但依旧具备可以滚动的功能 */\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t::-webkit-scrollbar {\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\tcolor: transparent;\r\n\t}\r\n\r\n\t.uni-system-open-location .map-content.fix-position {\r\n\t\theight: 100vh;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t}\r\n</style>\r\n"],"sourceRoot":""}