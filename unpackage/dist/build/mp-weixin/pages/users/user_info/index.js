(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/user_info/index"],{2636:function(t,e,n){"use strict";n.r(e);var i=n("5228"),o=n("3feb");for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n("c316");var a,u=n("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"4c5be872",null,!1,i["a"],a);e["default"]=c.exports},"27ae":function(t,e,n){"use strict";(function(t){n("b632");i(n("66fd"));var e=i(n("2636"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},"3feb":function(t,e,n){"use strict";n.r(e);var i=n("4a26"),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},"4a26":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("7875"),o=n("ebd3"),s=n("2597"),a=n("26cb"),u=(c(n("554b")),c(n("4757")));function c(t){return t&&t.__esModule?t:{default:t}}var r=function(){n.e("components/Authorize").then(function(){return resolve(n("60e6"))}.bind(null,n)).catch(n.oe)},f={components:{authorize:r},mixins:[u.default],data:function(){return{userInfo:{},loginType:"h5",userIndex:0,switchUserInfo:[],isAuto:!1,isShowAuth:!1,canvasWidth:"",canvasHeight:"",canvasStatus:!1,fileSizeString:""}},computed:(0,a.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(t,e){t&&this.getUserInfo()},deep:!0}},onLoad:function(){this.isLogin?(this.getUserInfo(),this.formatSize()):(0,s.toLogin)()},methods:{formatSize:function(){var t=this;plus.cache.calculate((function(e){var n=parseInt(e);t.fileSizeString=0==n?"0B":n<1024?n+"B":n<1048576?(n/1024).toFixed(2)+"KB":n<1073741824?(n/1048576).toFixed(2)+"MB":(n/1073741824).toFixed(2)+"GB"}))},initData:function(){var e=this;t.showModal({title:"清楚缓存",content:"确定清楚本地缓存数据吗?",success:function(t){if(t.confirm)e.clearCache(),e.formatSize();else if(t.cancel)return that.$util.Tips({title:"已取消"})}})},clearCache:function(){var e=this,n=plus.os.name;if("Android"==n)for(var i=plus.android.runtimeMainActivity(),o=i.getCacheDir(),s=plus.android.invoke(o,"listFiles"),a=s.length,u=0;u<a;u++){var c=""+s[u];plus.io.resolveLocalFileSystemURL(c,(function(n){n.isDirectory?n.removeRecursively((function(n){t.showToast({title:"缓存清理完成",duration:2e3}),e.formatSize()}),(function(t){})):n.remove()}),(function(t){}))}else plus.cache.clear((function(){t.showToast({title:"缓存清理完成",duration:2e3}),e.formatSize()}))},onLoadFun:function(){this.getUserInfo()},authColse:function(t){this.isShowAuth=t},Setting:function(){t.openSetting({success:function(t){}})},switchAccounts:function(e){var n=this,i=this.switchUserInfo[e],a=this;return a.userIndex=e,a.switchUserInfo.length<=1||(void 0===i?a.$util.Tips({title:"切换的账号不存在"}):void("h5"===i.user_type?(t.showLoading({title:"正在切换中"}),(0,o.switchH5Login)().then((function(e){t.hideLoading(),a.$store.commit("LOGIN",{token:e.data.token,time:n.$Cache.strTotime(e.data.expires_time)-n.$Cache.time()}),a.getUserInfo()})).catch((function(e){return t.hideLoading(),a.$util.Tips({title:e})}))):(a.$store.commit("LOGOUT"),t.showLoading({title:"正在切换中"}),(0,s.toLogin)())))},outLogin:function(){var e=this;"h5"==e.loginType&&t.showModal({title:"提示",content:"确认退出登录?",success:function(n){n.confirm?(0,i.getLogout)().then((function(n){e.$store.commit("LOGOUT"),t.reLaunch({url:"/pages/index/index"})})).catch((function(t){})):n.cancel}})},getUserInfo:function(){var t=this;(0,i.getUserInfo)().then((function(e){t.$set(t,"userInfo",e.data);for(var n=e.data.switchUserInfo||[],i=0;i<n.length;i++)n[i].uid==t.userInfo.uid&&(t.userIndex=i);t.$set(t,"switchUserInfo",n)}))},uploadpic:function(){var t=this,e=this;this.canvasStatus=!0,e.$util.uploadImageChange("upload/image",(function(n){var i=e.switchUserInfo[e.userIndex];void 0!==i&&(e.userInfo.avatar=n.data.url),e.switchUserInfo[e.userIndex]=i,e.$set(e,"switchUserInfo",e.switchUserInfo),t.canvasStatus=!1}),(function(e){t.canvasStatus=!1}),(function(e){t.canvasWidth=e.w,t.canvasHeight=e.h}))},formSubmit:function(t){var e=this,n=t.detail.value;e.switchUserInfo[e.userIndex];if(!n.nickname)return e.$util.Tips({title:"用户姓名不能为空"});n.avatar=this.userInfo.avatar,(0,i.userEdit)(n).then((function(t){return e.$util.Tips({title:t.msg,icon:"success"},{tab:3,url:1})})).catch((function(t){return e.$util.Tips({title:t||"保存失败，您并没有修改"},{tab:3,url:1})}))}}};e.default=f}).call(this,n("543d")["default"])},5228:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement;t._self._c},s=[]},c316:function(t,e,n){"use strict";var i=n("ecf9"),o=n.n(i);o.a},ecf9:function(t,e,n){}},[["27ae","common/runtime","common/vendor"]]]);